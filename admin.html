<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <script type="module" src="firebase.js"></script>
</head>
<body style="text-align:center;font-family:sans-serif;padding:40px;">

<h2>Admin - Generate Spin Code</h2>

<button onclick="generateCode()">Generate Code</button>

<h3 id="result"></h3>

<script type="module">
import { db } from "./firebase.js";
import { doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

function randomCode(){
  return Math.random().toString(36).substring(2,8).toUpperCase();
}

window.generateCode = async function() {
  const code = randomCode();

  await setDoc(doc(db, "codes", code), {
    used: false,
    createdAt: new Date()
  });

  document.getElementById("result").innerText = "Generated Code: " + code;
}
</script>

</body>
</html>
